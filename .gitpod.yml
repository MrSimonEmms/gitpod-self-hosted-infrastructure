tasks:
  - name: Install Terraform
    init: |
      brew install helm kubectl terraform-docs tfenv yq
      npm i -g markdown-toc
      tfenv install
      tfenv use latest

      echo 'source <(kubectl completion bash)' >>~/.bashrc
      echo 'source <(helm completion bash)' >>~/.bashrc

      # KOTS
      curl https://kots.io/install | bash
      echo 'source <(kubectl kots completion bash)' >>~/.bashrc

      # Azure CLI
      curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

      # Google CLI
      sudo apt-get install -y apt-transport-https ca-certificates gnupg
      echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" | sudo tee -a /etc/apt/sources.list.d/google-cloud-sdk.list
      curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key --keyring /usr/share/keyrings/cloud.google.gpg add -
      sudo apt-get update && sudo apt-get install -y google-cloud-cli
    command: terraform init
vscode:
  extensions:
    - HashiCorp.terraform
    - EditorConfig.EditorConfig
    - donjayamanne.githistory
    - octref.vetur
ports:
  - port: 8800
    visibility: private
